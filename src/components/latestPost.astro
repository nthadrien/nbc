---
const locale = getLangFromUrl(Astro.url);
const t = useTranslations(locale);
import BlogCard from "./cards/blogCard.astro";
import { getLangFromUrl, useTranslations } from "../i18n/utils";
import { getCollection } from "astro:content";

const posts = await getCollection("posts", post => post.id.startsWith(locale+"/"));

---
<section class="container-fluid d-flex flex-column gap-3 justify-content-center align-items-center py-5 bg-body-tertiary">

    <aside class="col-12 col-lg-8 col-xxl-7 text-center">
        <span class="text-muted">{t('posts')}</span>
        <h3 class="display-6 fw-bold">{t('post.new')}</h3>
        <p class="lead">{t('post.desc')}</p>
    </aside>

    <aside class="container mx-auto d-flex justify-content-md-center gap-2 overflow-x-auto">
        {posts.slice(0,3).map( item => <div style="min-width: 250px;max-width: 280px;" class="flex-shrink-0">
            <BlogCard post={item} />
        </div>)}
    </aside>

    <a class="btn btn-primary" href={`${locale}/blog/1`}>{t('read')}</a>

</section>