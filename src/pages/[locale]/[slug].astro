---
import type { GetStaticPaths } from "astro";
import { type CollectionEntry, getCollection, render } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";
import BlogHeader from "../../components/headers/blogHeader.astro";
import ContactUs from "../../components/contactUs.astro";

export const getStaticPaths = (async () => {
	const subPages = await getCollection('terms');
	return subPages.map( page => ({ 
		params : { locale : page.data.lang , slug: page.id },
		props: { page }
	}));
}) satisfies GetStaticPaths;


interface Props {
    page: CollectionEntry<'terms'>;
}

const { page } = Astro.props;
const { Content, remarkPluginFrontmatter, headings } = await render(page);

const locale = getLangFromUrl(Astro.url);
const t = useTranslations(locale);

---

<Layout>

	<BlogHeader hText={page.id.replaceAll("-"," ")} currentPage="" />

	
    <div class="container-xl mx-auto nav flex-column flex-lg-row py-5 px-3 position-relative">

        <nav class="col-lg-4 d-none d-lg-block">

            <div class="sticky-top p-2 p-lg-3">
                <h4>{t('t.content')}</h4>
                <ul class="list-unstyled mb-3 border-top">
                    {headings.map( head => <li class={"mb-3 "+(head.depth > 2 ? `ps-${head.depth}` : ``)}>
                        <a href={`#${head.slug}`}>{head.text}</a>
                    </li>)}
                </ul>
            </div>

        </nav>

        <main id="content" class="col-lg-8">
            <p><span class="vr mx-3" /> {remarkPluginFrontmatter.minutesRead} </p>
            <Content /> 
        </main>

                
    </div>

	<ContactUs />

    
</Layout>

<style is:global>
    * {
        font-size: 12px;
    }

    h1, h2 , h3, h4 , h5 {
        margin: 1rem 0;
    }
    
    #content > b, #content > strong {
        color: brown;
    }
</style>